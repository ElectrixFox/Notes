\documentclass[10pt, a4paper]{article}
\usepackage{preamble}

\counterwithin*{equation}{subsection}

\title{Discrete Mathematics}
\author{Luke Phillips}
\date{October 2024}

\begin{document}

\maketitle

\newpage

\section{Introduction}

\textbf{Starter problems}

\textbf{A1}: A set menu has a choice of 3 possible desserts. A party of 5 diners all order
a dessert each. In how many ways can the party choose their desserts?

This question can be rephrased to treat the people as distinguishable balls and the desserts as distinguishable boxes to put the people in.

\textbf{A2}: A man has 5 identical Â£1 coins that he intends to put into up to 3 different
charity boxes. In how many ways can he distribute the money among the
charities?

This question can be rephrased to treat the coins as balls which are indistinguishable and the charity boxes as distinguishable boxes.

\textbf{A3}: 5 people on a beach divide themselves into up to 3 teams in order to enter a
sand-castle building competition. How many ways are there of constructing
the teams?

This can be rephrased to have balls as people and boxes as teams and having the teams as the different boxes and the people as balls to put in the boxes.

\textbf{A4}: A woman wants to buy postage stamps to the value of 5 pence. Stamps are
available in all denominations of whole pence. How many different ways are
there of making the purchase with at most 3 stamps?

The number of balls in a box can represent the value of a single stamp, i.e. each box is a stamp and each ball is a 1 pence coin.

\subsection{Set notation}
\begin{itemize}
    \item $x \in S$, $x$ is in $x$.
    \item $x \notin S$, $x$ is not in $x$.
    \item $R \subseteq S$, $R$ is a subset of $S$\footnote{$x \in R \implies x \in S$}.
    \item $S \setminus R$, $S$ minus $R$, $S \setminus R = \{x: x \in S \text{ and } x \notin R\}$.
    \item $R \cup S =  \{x : x \in R \text{ or } x \in S\}$.
    \item $R \cap S =  \{x : x \in R \text{ and } x \in S\}$.
\end{itemize}

If $S$ is a finite set its size or cardinality, denoted as $|S|$, is the number of elements in $S$.

\textbf{Cartesian product}

If $X$ and $Y$ are two sets then, 
\[
X \times Y = \{(x, y) : x \in X \text{ and } y \in Y\},
\]
the set of ordered pairs.

\begin{example}
    $X = \{1, 2, 3\}\quad Y = \{a, b\}$
    \[
    X \times Y = \{(1, a), (1, b), (2, a), (2, b), (3, a), (3, b)\}.
    \]
    \[
    Y \times X = \{(a, 1), (a, 2), (a, 3), (b, 1), (b, 2), (b, 3)\}.
    \]
\end{example}
We can write $X \times X = X ^ 2$.
\[
X ^ n = X \times X \times \dotsi X = \{(x_1, x_2, \dots, x_n) : x_i \in X \text{ for all } i\}
\]

\begin{proposition}
    Let $X$ and $Y$ be finite sets.
    \begin{enumerate}[label = (\alph*)]
        \item $|X \times Y| = |X|\cdot|Y|$
        \item $|X ^ n| = |X| ^ n$
    \end{enumerate}
\end{proposition}

\begin{example}
    Let $A = \{1, 2, 3, 4, 5, 6\}$. How many subsets does $A$ have?
    \[
    2 ^ 6
    \]
    Let $I = \{0, 1\}$ consider $I ^ 6 = \{(a_1, a_2, \dots, a_6) : a_i \in I\}$

    $|I ^ 6| = 2 ^ 6$
    
    Consider the set of all subsets of set $\{1, 2, \dots, 6\}$ we construct a bijection between $I ^ 6$ and the set of subsets. $A \mapsto (1, 1, 1, 1, 1, 1)$, $\{1, 4, 5\} \mapsto (1, 0, 0, 1, 1, 0)$
\end{example}

\section{Arrangements and permutations}
An arrangement (or list) is a sequence (finite) of items in which order matters.

The length of the arrangement is the number of items in the sequence.

Standard problem \#1

How many lists of length $k$ can be made from elements of a set of size $|S|$? There are $n ^ k$

Standard problem \#2

How many lists of length $k$ with no repetition can be made from elements of set $S$ with $|S| = n$?
\[
n(n - 1)(n - 2) \dotsi (n - k + 1) = \frac{n!}{(n - k)!}\quad\text{for } k \leq n
\]
we use the multiplication principle.

$1 \leq i \leq k$, there are $n_i$ choices for the $i$th item in the list, regardless of previous choices the number of possible lists is $n_1  \cdot n_2 \dotsi n_k$.

\begin{definition}
    A permutation on a set $S$ is a list of elements of $S$ using each element exactly once.
\end{definition}

\begin{proposition}
    If $|S| = n$ there are $n!$ permutations on $S$.

    \begin{proof}
        Standard proof \#2 (no repeats) with $n = k$.
    \end{proof}
\end{proposition}

An $r$-permutation on $S$ is a list of $r$ distinct elements from $S$ permutation if $r = |S|$.

We write $P(n, r)$ for the number of $r$-permutations on a set of size $n$.
\[
P(n, r) = n(n - 1) \dotsi (n - r + 1) = \frac{n!}{(n - r)!},\text{ for } 0 \leq r \leq n.
\]

\textbf{Addition principle}. If $A$ and $B$ are finite and disjoint sets. Then
\[
|A \cup B| = |A| + |B|
\]
if $A_1, A_2, \dotsc, A_n$ are pairwise disjoint, $A_i \cap A_j = \emptyset$ for all $i \neq j$, then
\[
|A_1 \cup A_2 \cup \dotsi \cup A_n| = |A_1| + |A_2| + \dotsi + |A_n|.
\]
\[
\left|\bigcup_{i = 1}^{n}A_i\right| = \sum_{i = 1}^{n}|A_i|.
\]

If $A \cup B = \emptyset$
\[
|A \cup B| = |A| + |B| - |A \cap B|
\]

\subsection{Counting examples}

\begin{enumerate}[label = B\arabic*]
    \item How many $4$-letter words use the letter E at least once?
    
    The number of $4$-letter words is $26 ^ 4$ those that do not use $E$ is $25 ^ 4$ hence the total number is $26 ^ 4 - 25 ^ 4$.
    \item How many $4$-letter words use the letter E exactly once?

    The number of $4$-letter words which use exactly E is equivalent to the set of all $4$ letter words, $4$ possible locations with $25 ^ 3$ other letter choices hence, the total is $4 \times 25 ^ 3$.
    
    \item How many $4$-letter words contain no three identical letters in consecutive positions?

    There are $26 ^ 4$ possible words, there are $26 + (26 \times 25) + (26 \times 25)$ words with the same letter three times.

    Hence the total is $26 ^ 4 - 51 \times 26$.
    
    \item How many $4$-letter words use both E and T both at least once?

    There are $24 ^ 4$ words with neither an E nor a T. There are $26 ^ 4 - 24 ^ 4$ words with both E and T, and $|E| = |T| = 26 ^ 4 - 25 ^ 4$ So
    \[
    |E \cap T| = |E| + |T| - |E \cup T| = 2(26 ^ 4 - 25 ^ 4) - (26 ^ 4 - 24 ^ 4) = 26 ^ 4 - 2 \cdot 25 ^ 4 + 24 ^ 4.
    \]
    
    \item How many $3$-letter words have their letters in strict alphabetical order ("strict" no letters can be the same)?

    There are $26 \times 25 \times 24$ words with $3$ distinct letters. There are $3!$ permutations of these letters but they must be in strict alphabetical order which is only one of the $6$ permutations therefore the total is $\frac{1}{6}(26)_3 = \frac{1}{6}(26 \times 25 \times 24)$.
\end{enumerate}

\newpage

\section{Combinations}
A combination from a set of objects is an unordered selection of elements from that set (repeats may be allowed)

Formally a combination on set $S$ is identified by the multiplicities $m_i,\, i \in S$, where $m_i = \text{ number of times element $i$ appeared}$.

The size of a combination is the number of selection i.e. the sum of all the multiplicities $\sum_{i \in S}m_i$. We sometimes call a combination of size $k$ a $k$-combination.

How many combinations without repetitions do we have from a set of size $n$?

First consider the arrangements (ordered, no repetitions) there are $P(n, k) = \frac{n!}{(n - k)!}$ of these, sort into groups of arrangements using the same set of letters, each group has $k!$ lists, so the number of groups is $\frac{P(n, k)}{k!} = \frac{n!}{k!(n - k)!}$.

\begin{example}
    How many ways are there of selecting $10$ different letters of the alphabet? Or $16$
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        A $10$-combination without repetition, from size $26$ is
        \[
        \binom{26}{10} = \frac{26!}{10!(26 - 10)!} = \binom{26}{16}.
        \]
    \end{proof}
\end{example}

\begin{proposition}
    \[
    \binom{n}{k} = \binom{n}{n - k}.
    \]
    \begin{proof}
        Each choice of $k$ objects from $n$ to take corresponds exactly to a choice of $n - k$ to leave.
    \end{proof}
\end{proposition}

\begin{example}
    Consider combination of $6$ distinct elements of $\{0, 1, \dotsc, 9\}$. (a) How many contain $0$? (b) And how many do not?
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        (a) We remove $0$ from the elements so choose from $\{1, 2, \dotsc, 9\}$ and much choose $5$ numbers therefore is $\binom{9}{5}$.

        (b) we must choose all $6$ from $\{1, 2, \dotsc, 9\}$ so the answer is $\binom{9}{6}$.
    \end{proof}
\end{example}

\begin{proposition}[Pascal's formula]
    \[
    \binom{n}{r} = \binom{n - 1}{r - 1} + \binom{n - 1}{r}\quad(1 \leq r \leq n - 1)
    \]
    \begin{proof}
        
    \end{proof}
\end{proposition}

\begin{theorem}[The binomial theorem]
    $n$ is a positive integer, $a$ and $b$ are real numbers, then
    \[
    (a + b) ^ n = \sum_{k = 0}^{n}\binom{n}{k}a ^ {k} b ^ {n - k}
    \]
    \begin{proof}
        \[
        (a + b)(a + b) \dotsi (a + b)
        \]
        when multiplied out, gives various terms of the form $a ^ k b ^ {n - k}$. For fixed $k$, the number of terms $a ^ k b ^ {n - k}$ is $\binom{n}{k}$ since one chooses the $k$ brackets in the product.
    \end{proof}
\end{theorem}

\begin{example}
    Prove the following identities are valid for integer $n \geq 0$.
    \begin{enumerate}[label = C\arabic*]
        \item
        \[
        \sum_{k = 0}^n\binom{n}{k} = 2 ^ n
        \]
        \item
        \[
        \sum_{k = 0}^n\binom{n}{k}(-1) ^ k = 0
        \]
        \item 
        \[
        \sum_{k = 0}^n\binom{n}{k}2 ^ k = 3 ^ n
        \]
        \item
        \[
        \sum_{k = 0}^n\binom{n}{k}k = n2 ^ {n - 1}
        \]
    \end{enumerate}

    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        All of these examples are based on the binomial theorem in the form
        \[
        (1 + x) ^ n = \sum_{k = 0}^{n}\binom{n}{k}x ^ k
        \]
        \begin{enumerate}[label = C\arabic*]
        \item Now put $x = 1$
        \[
        x = 1 \implies (1 + 1) ^ n = \sum_{k = 0}^{n}\binom{n}{k}1 ^ k
        \]
        \item Now put $x = -1$
        \begin{align*}
        \underbrace{(1 - 1) ^ n}_{0 ^ n = 0} &= \sum_{k = 0}^{n}\binom{n}{k}(-1) ^ n \\
        &= \binom{n}{0} - \binom{n}{1} + \binom{n}{2} - \binom{n}{3} + \dotsi \pm \binom{n}{k}
        \end{align*}
        \item Put $x = 2$
        \[
        3 ^ n = \sum_{k = 0}^{n}\binom{n}{k}2 ^ k
        \]
        \item The trick is to differentiate both sides of 
        \[
        n(1 + x) ^ {n - 1} = \sum_{k = 0}^{n}\binom{n}{k}kx ^ {k - 1},\quad(n \geq 1),
        \]
        and now set $x = 1$. Check $n = 0$ also works.
        \end{enumerate}
    \end{proof}
\end{example}

\begin{example}
    A poker hand is a $5$ combination from the deck of $52$ cards $13 \times 4$, $13$ denominations $4$ suits. There are $\binom{52}{5}$ possible hands.
    \begin{enumerate}[label = (\alph*)]
        \item Four of a kind: $4$ cards of the same denomination the $5$th card is any.

        First choose the denomination: $13$ choices, the remaining $48$ cards, the answer is $13 \times 48$.

        \item Full house: A triple ($3$ cards of the same denomination) and a pair ($2$ cards of the same denomination).

        First choose the denomination of triple, $13$ choices, then choose the suits for the triple. $\binom{4}{3} = 4$ ways.
        Now choose the denomination of the pair, $12$ choices, choose suit $\binom{4}{2} = 6$. The answer is $13 \times \binom{4}{3} \times 12 \times \binom{4}{2} = 3744$.
    \end{enumerate}
\end{example}

\newpage

\section{Arrangements and combinations with repetitions}

\subsection{Arrangements with repetition}

(Items can be replaces)
\begin{example}
    How many arrangements of the letters MISSISSIPPI are there?

    \begin{proof}[Solution 1]\renewcommand{\qedsymbol}{}
        We have $4$ I's, $4$ S's, $2$ P's and $1$ M to arrange in $11$ places.

        First choose $4$ places for the I's (the I's are indistinguishable): $\binom{11}{4}$ ways to do this.
        Now choose $4$ of the remaining places for the S's there are $\binom{7}{4}$ ways.
        Now choose $2$ places for the P's, $\binom{3}{2}$ ways to choose the P's.
        Finally, the last place is taken by M.
        So the answer is
        \[
        \binom{11}{4}\binom{7}{4}\binom{3}{2}\binom{1}{1} = \frac{11!}{4!7!}\frac{7!}{4!3!}\frac{3!}{2!1!}\frac{1!}{1!0!} = \frac{11!}{4!4!2!1!}.
        \]
    \end{proof}
    \begin{proof}[Solution 2]\renewcommand{\qedsymbol}{}
        First image all the letters are different, $I_1, I_2, I_3, I_4, S_1, S_2, S_3, S_4,\dotsc$.
        There are $11!$ ways to arrange these.
        This grouping has $4!$ arrangements which are the same.
    \end{proof}
\end{example}

Standard problem \#4: How many arrangements are there of a list of objects in which some objects are repeated?

\begin{theorem}\label{disc_thm_41}
    Given a list of $n$ objects of $r$ different types, in which each object of type $i$ occur $n_i$ times (with $n_1 + \dotsi + n_r = n$), the number of arrangements of the list is
    \[
    P(n; n_1, n_2, \dotsc, n_r) = \frac{n!}{n_1!n_2!\dotsi n_r!}.
    \]
    \begin{proof}
        As in example.
    \end{proof}
\end{theorem}

\begin{example}\phantom{}
    \begin{enumerate}[label = (D\arabic*)]
        \item  How many arrangements of REARRANGE are there?
        \item Of these how many of these have all the $R$s together as a block?
        \item How many have at least two $R$s together?
    \end{enumerate}

    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}\phantom{}
        \begin{enumerate}[label = (D\arabic*)]
            \item
            We have
            AA EE G N RRR
            by \autoref{disc_thm_41} we get $\frac{9!}{3!2!2!1!1!}$
            \item Treat RRR as a single object so
            $n = 2$ we have $2 + 2 + 1 + 1$ elements,
            we get $\frac{7!}{2!2!}$.
            \item
            "At least" find first the "bad" one,
            where we have no Rs together.
            First arrange the other letters AAEEGB,
            so we have $\frac{6!}{2!2!}$ ways.
            One of possibilities: A G E E A N, G A E A E N.
            
            Now we need to put Rs inside,
            so there are $\binom{7}{3}$ ways to put Rs inside.
            So the answer for "bad" cases is $\binom{7}{3}\frac{6!}{2!3!}$,
            so the answer is $\frac{9!}{3!2!2!} = \binom{7}{3}\frac{6!}{2!2!}$
        \end{enumerate}
    \end{proof}
\end{example}

\subsection{Combination with repetition}
Standard Problem \#5: From a set of $n$ objects,
how many $k$-combinations can be chosen if repeats are allowed?

But first we consider a different question

Standard problem \#6: How many $k$-combinations with repetitions from $n$ objects are there in which each object is chosen at least once?

Remark, need $k \geq n$ for a non-zero answer.

\begin{example}
    Count the $5$ combinations with repetitions from set $\{1, 2, 3\}$ in which each number repeats at least once.
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        Standard problem \#6.

        Since order doesn't matter we represent each combination in numerical order.
        E.g. $11123$, $11223$, $11233$, $12223$, $12233$, $12333$.

        Now insert markers where the numbers change.
        \begin{align*}
            111|2|3 \\
            11|22|3 \\
            11|2|33 \\
            1|22|33 \\
            1|2|333.
        \end{align*}
        What we did, we inserted two markers in $4$ possible gaps.
        So the number of combinations is the number of ways to put markers,
        \[
        \binom{4}{2} = 6.
        \]
    \end{proof}
\end{example}

\begin{theorem}\label{disc_thm_kcombwrep}
    The number of $k$-combinations from $n$ objects with repetitions and each object occurring at least once is
    \[
    \binom{k - 1}{n - 1}\text{ for } k \geq n.
    \]
    \begin{proof}
        As in the example.

        There are $k - 1$ positions and $n - 1$ markers.
        There are $\binom{k - 1}{n - 1}$ ways to put markers.
    \end{proof}
\end{theorem}

\begin{example}
    A student buys $10$ bars of chocolate.
    There are $4$ types available,
    M, S, T, Y.
    How many combinations are possible?
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        This is standard problem \#5 we turn it into standard problem \#6.
    \end{proof}
\end{example}

\begin{theorem}\label{disc_thm_diffobjrep}
    The number of $k$-combinations from $n$ different objects with repetitions is
    \[
    \binom{k + n - 1}{n - 1} = \binom{k + n - 1}{k}
    \]
    \begin{proof}
        Consider $k + n - 1$ places and $n - 1$ markers,
        put them in these places not more than one per place.
        $k$ places are not "busy",
        the number of empty places before the first marker will be $x_1$,
        between the first and second is $x_2$ and so on to get
        $x_1, x_2, x_3, \dotsc, x_n$ which gets
        \[
        x_1 + x_2 + x_3 + \dotsi + x_n = k
        \]
        since $x_i \geq 0\, \forall i \in \N$.
        But how many ways are there to put markers?
        There are
        \[
        \binom{n + k - 1}{n - 1}.
        \]
    \end{proof}
\end{theorem}

\begin{example}
    \begin{enumerate}[label = E\arabic*]
        \item 
        How many $6$ letter words have the letters in weak alphabetical order (with multiple of the same letter allowed) (So both ALMOST and ACCESS are allowed.).
        \item
        Wimpy's offers offered W/Burgers (B), W/Cheeseburgers (C), Hawaiian Burgers (H), and Fish Specials (S).
        Seven people each request a single meal.
        \begin{enumerate}[label = (\alph*)]
            \item How many different orders may the kitchen be asked to prepare?
            \item How many omit at least one type of meal?
            \item How many omit exactly one type of meal?
        \end{enumerate}
        \item How many integer solutions $(x_1, x_2, x_3, x_4)$ are there to the equation
        \[
        x_1 + x_2 + x_3 + x_4 = 7
        \]
        where
        \begin{enumerate}[label = (\alph*)]
            \item each $x_i$ is a positive integer?
            \item each $x_i$ is a non-negative integer?
            \item $x_i \geq 0$ for odd $i$ and $x_i \geq 1$ for even $i$?
        \end{enumerate}
    \end{enumerate}

    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
    \begin{enumerate}[label = E\arabic*]
        \item Each $6$-combination from A-Z (with repetitions) corresponds to a word when arranged in (weak) alphabetical order.
        So this is Standard Problem \#5 with $k = 6$ and $n = 26$,
        so \autoref{disc_thm_diffobjrep} gives the answer $\binom{26 + 6 - 1}{6} = \binom{31}{6}$.
        \item
        \begin{enumerate}[label = (\alph*)]
            \item Again Standard Problem \#5 $k = 7$, $n = 4$
            so we get $\binom{k + n - 1}{n - 1} = \binom{10}{3}$.
            \item Firstly, how many use each meal at least one?
            This is Standard Problem \#6 with $k = 7$, $n = 4$.
            So the answer will be \autoref{disc_thm_kcombwrep} $\binom{k - 1}{n - 1}$ we get
            \[
            \binom{7 - 1}{4 - 1} = \binom{6}{3}.
            \]
            So, the orders that do not use every meal are
            \[
            \binom{10}{3} - \binom{6}{3}
            \]
            \item First choose which meal to omit $4$ choices.
            Then count orders using the remaining $3$ types all at least once.
            This is Standard Problem \#6 with $k = 7$, $n = 3$.
            So the answer is $4 \cdot \binom{6}{2}$
        \end{enumerate}
        \item 
        \begin{enumerate}[label = (\alph*)]
            \item $x_i \geq 1$ corresponds to Standard Problem \#6 with $k = 7$, $n = 4$.
            So we get $\binom{k - 1}{n - 1} = \binom{6}{3}$.
            \item Standard Problem \#5 $\binom{k + n - 1}{n - 1} = \binom{7 + 4 - 1}{4 - 1} = \binom{10}{3}$.
            \item $x_1 \geq 0, x_2 \geq 1, x_3 \geq 0, x_4 \geq 1$. Substitution $y_1 = x_1 + 1$, $y_2 = x_2$, $y_3 = x_3 + 1$, $y_4 = x_4$
            \[
            x_1 + x_2 + x_3 + x_4 + 2 = y_1 + y_2 + y_3 + y_4 = 9,
            \]
            so we get $\binom{8}{3}$ solutions.
        \end{enumerate}
    \end{enumerate}
    \end{proof}
\end{example}


\subsection{Extended binomial coefficients}
$\binom{-1}{3}$ is the coefficient of $x ^ 3$ in the expansion of $(1 + x) ^ {-1} = \frac{1}{1 + x}$.
\[
(1 + x) ^ \alpha = \sum_{k = 0}^{\infty}\binom{\alpha}{k}x ^ k
\]
where $\alpha \in \R$.

Note:
\begin{itemize}
    \item If $\alpha$ is a positive integer and $0 \leq k \leq \alpha$,
    then this is just
    \[
    \binom{\alpha}{k} = \frac{\alpha!}{k!(\alpha - k)!}
    \]
    \item If $\alpha$ is a positive integer,
    and $k > \alpha$.
    Then $\binom{\alpha}{k} = 0$ because the numerator contains a factor $0$.
    \item If $\alpha$ is not a positive integer,
    there are no $0$'s in the numerator in the binomial coefficient, so $\binom{\alpha}{k} \neq 0$ for any $k$, so the power series is infinite.
\end{itemize}

\begin{proposition}[Principle of upper negation]
    If $n$ and $k$ are positive integers,
    then
    \[
    \binom{-n}{k} = (-1) ^ k\binom{k + n - 1}{k} = (-1) ^ k\binom{k + n - 1}{n - 1}.
    \]
    \begin{proof}
        \begin{align*}
            \binom{-n}{k} &= \frac{(-n)(-n-1)(-n-2)\dotsi(-n-k+1)}{k!} \\
            &= (-1) ^ k \frac{n(n + 1)\dotsi(n + k - 1)}{k!} \\
            &= \frac{(-1) ^ k(n + k - 1)!}{k!(n - 1)!} \\
            &= (-1) ^ k\binom{n + k - 1}{k}.
        \end{align*}
    \end{proof}
\end{proposition}

\begin{example}
    $(1 + x) ^ {-n} = \sum_{k = 1}^{\infty}\binom{-n}{k}x ^ k = \sum_{k = 1}^{\infty}(-1) ^ k\binom{k + n - 1}{n - 1}x ^ k$.

    By the principle of upper negation.
    In particular,
    if we take $x = -y$ we have
    \[
    \frac{1}{(1 - y) ^ n} = (1 - y) ^ {-n} = \sum_{k = 0}^{\infty}\binom{k + n - 1}{k}y ^ k.
    \]
\end{example}

\begin{example}
    Expand the following as series:
    \begin{enumerate}[label = (\roman*)]
        \item $(1 - x) ^ {-1}$.
        \item $(1 - x) ^ {-2}$.
        \item $(1 - x) ^ {-3}$.
        \item $(1 - x) ^ {-6}$.
    \end{enumerate}
    \begin{enumerate}[label = (\roman*)]
        \item $\sum_{k = 0}^{\infty}x ^ k = 1 + x + x ^ 2 + \dotsi$.
        \item $\sum_{k = 0}^{\infty}(k + 1)x ^ k = 1 + 2x + 3x ^ 2 + \dotsi$.
    \end{enumerate}
\end{example}

\section{Three Principles}

\subsection{Inclusion exclusion formula}
\begin{align*}
|A_1 \cup A_2 \cup A_3| &= |A_1 \cup (A_2 \cup A_3)| = |A_1| + |A_2 \cup A_3| - |A_1 \cap (A_2 \cup A_3)| \\
&= |A_1| + |A_2| + |A_3| - |A_1 \cap A_3| - |A_1 \cap A_2| - |A_2 \cap A_3| + |A_1 \cap A_2 \cap A_3|
\end{align*}
\[
A \cap (B \cup C) = (A \cap B) \cup (A \cap C)
\]

The case of general $n$ is similar but needs more notation,
consider sets $A_1, A_2, A_3, A_4$
\[
|A_1 \cup A_2 \dotsi \cup A_n|
\]
The formulae involves a $k$-fold intersection.
$(1 \leq k \leq n)$ $A_{i_1} \cap A_{i_2} \cap A_{i_3} \cap \dotsi \cap A_{i_k}$ where $1 \leq i_1 < i_2 < \dotsi < i_k \leq n$

Let $S_k = \sum_{i_1 < i_2 < i_k}|A_{i_1} \cap \dotsi \cap A_{i_k}|$.
The sum of all positive $k$-fold intersections
(There are exactly $\binom{n}{k}$ terms)

\begin{theorem}[Inclusion-exclusion formula]
    For a positive integer $n$ and finite sets
    $A_1, \dotsc, A_n$,
    \[
    |A_1 \cup A_2 \cup \dotsi \cup A_n| = \sum_{k = 1}^{n}(-1) ^ {k + 1}S_k,
    \]
    where
    \[
    S_k = \sum_{i_1 < i_2 < \dotsi < i_k}|A_{i_1} \cap A_{i_2} \cap \dotsi A_{i_k}|.
    \]
    \begin{proof}
        Start with induction base case $n = 2$.
        \large\textbf{Exercise!}
    \end{proof}
    
\end{theorem}

\begin{definition}
    A permutation is called a dearrangement if no element ends up in its correct position.
\end{definition}

\begin{proposition}
    The number of dearrangements of $1, 2, \dotsc, n$ is
    \[
    d(n) = \sum_{k = 0}^{n}(-1) ^ k\frac{n!}{k!}.
    \]
    \begin{proof}
        We subtract from $n!$ the number of non-dearrangements to get
        \begin{align*}
            d(n) &= n! - \sum_{k = 1}^{n}(-1) ^ {k + 1}\frac{n!}{k!} \\
            &= n!\left(1 + \sum_{k = 1}^n(-1) ^ k\frac{1}{k!}\right) \\
            &= n!\sum_{k = 0}^n(-1) ^ k\frac{1}{k!}.
        \end{align*}
    \end{proof}
\end{proposition}

\subsection{Mathematical induction}
Suppose we have a sequence of propositions (statements) $P(n)$ labelled by integers $n = 0, 1, 2, \dotsc$ whose truth we wish to establish.

\begin{theorem}[Principle of mathematics induction]
    Suppose that $P(n)$ is a sequence of propositions labelled by integers $n \geq n_0$.
    Suppose that
    \begin{enumerate}[label = (\alph*)]
        \item $P(n_0)$ is true; and
        \item For any $n \geq n_0$,
        the truth of $P(n)$ implies the truth of $P(n + 1)$.
    \end{enumerate}
    Then,
    for every $n \geq n_0$,
    $P(n)$ is true.
    \begin{proof}
        $P(n_0)$ is true by assumption (a).
        Then by (b),
        $P(n_0 + 1)$ is also true.
        Again by (b),
        $P(n_0 + 2)$ is also true.
        And so on.
        This chain of deductions eventually reaches any given $n \geq n_0$,
        so $P(n)$ is true for all $n \geq n_0$.
    \end{proof}
\end{theorem}

\subsection{The pigeon hole principle}
If there are $n$ envelopes distributed amongst $n$ pigeon holes and $n > m$ then at least one pigeon hole contains more than one envelope.

\newpage

\section{Recurrence relations}
\subsection{Three examples}
\subsubsection{Example one}
A student has a flight of $n$ stairs to climb,
and can take either one or two stairs in a stride.
How many distinct ways of climbing the stairs does she have?
Call the answer $f_n$
Then
\begin{align*}
    f_1 &= 1 \\
    f_2 &= 2 \\
    f_3 &= 3 \\
\end{align*}

Let the number of ways with $n$ stairs be $f_n$.
We can define these recursively,
we can see that $f_n$ can be broken into two (disjoint) types:
$f_{n - 1}$ for the first stride climbing one stair then the rest being climbed $f_{n - 1}$ ways.
Similarly $f_{n - 2}$ for the first stride climbing two stairs and then the rest being climbed in $f_{n - 2}$ ways as there would be $n - 2$ stairs remaining.

Therefore we could climb $n$ stairs using $f_{n - 1}$ ways and $f_{n - 2}$ ways which would result in
\[
f_{n} = f_{n - 1} + f_{n - 2},\quad(n \geq 2).
\]

\subsubsection{Example two}
Draw $n$ infinite straight lines in the plane,
assumed to be non-parallel and non-concurrent
(no three meet at a point).
Into how many contiguous regions does this divide the plane?

Let $r_n$ be the number of regions.
We find that
\begin{align*}
    r_0 &= 1, \\
    r_1 &= 2, \\
    r_2 &= 4, \\
    r_3 &= 7, \\
    r_4 &= 11, \\
    r_5 &= 16.
\end{align*}
We can see that from $n = 3$,
to get to $n = 4$ we add a new line,
the $4$th line must cross all three other lines separately which creates a new region per line.
From this we can see that in general,
the $n$th new line crosses $n - 1$ lines creating $n$ new regions.
Hence
\[
r_n = r_{n - 1} + n,\quad(n \geq 1).
\]
In fact
\[
r_n = 1 + \binom{n + 1}{2} = 1 + \frac{1}{2}n(n + 1),\quad n \geq 1.
\]

\subsubsection{Tower of Hanoi}
This game is played with three pegs and $n$ rings of different sizes.
The initial position is the $n$ rings are stacked in a tower on a single peg in order of decreasing size from the base of the tower.

A permitted move is to remove a ring from the top of the pile,
and to place it on another peg provided it does not sit atop a smaller ring.

The objective is to move the whole tower from the starting peg to one of the other pegs in as few moves as possible.

What is the smallest number of moves necessary?

\[
t_n = 2t_{n - 1} + 1
\]
which can be generalised into
\[
t_n = 2 ^ n - 1\ (n \geq 1).
\]

\subsection{Towards a general method}
\begin{equation}
    f_n = f_{n - 1} + f_{n - 2}\ (n \geq 2)
\end{equation}
with initial conditions $f_0 = f_1 = 1$.

Try to find $f_n = x ^ n$ as a possible solution of (1)
\[
x ^ n = x ^ {n - 1} + x ^ {n - 2} \iff x ^ {n - 2}(x ^ 2 - x - 1) = 0.
\]
$x = 0, x_1 = \frac{1 + \sqrt{5}}{2}, x_3 = \frac{1 - \sqrt{5}}{2}$

$x = 0$ is the trivial solution.
\[
\alpha = \frac{1 + \sqrt{5}}{2}, \beta = \frac{1 - \sqrt{5}}{2}
\]
so
$f_n = \alpha ^ n$ and $f_n = \beta ^ n$
\[
\alpha ^ n = \alpha ^ {n - 1} + \alpha ^ {n - 2},\ \beta ^ n = \beta ^ {n - 1} + \beta ^ {n - 2}
\]
\[
f_n = c_1\alpha ^ n + c_2\beta ^ n\quad c_1, c_2 \in \R.
\]
\begin{align*}
    1 = f_0 &= c_1\alpha ^ 0 + c_2\beta ^ 0 = c_1 + c_2 = 1 \\
    1 = f_1 &= c_1\alpha + c_2\beta = c_1\alpha + c_2\beta = 1
\end{align*}

$c_1 = \frac{\alpha}{\sqrt{5}}$ and $c_2 = -\frac{\beta}{\sqrt{5}}$.
\begin{align*}
    f_n &= \frac{\alpha}{\sqrt{5}}\alpha ^ n - \frac{\beta}{\sqrt{5}}\beta ^ n \\
    &= \frac{1}{\sqrt{5}}(\alpha ^ {n + 1} - \beta ^ {n + 1}) \\
    &= \frac{1}{\sqrt{5}}\left(\left(\frac{1 + \sqrt{5}}{2}\right) ^ {n + 1} - \left(\frac{1 - \sqrt{5}}{2}\right) ^ {n + 1}\right).
\end{align*}

\subsection{General method for homogenous linear recurrence relations}
Let $(a_n)$ be a sequence indexed by integers $n = 0, 1, 2, \dotsc$.

We are given:
\begin{itemize}
    \item Initial conditions $a_0, a_1, \dotsc, a_{r - 1}$ ($r \in \N$)
    \item Recurrence relation
    \begin{equation}
        a_n = \sum_{i = 1}^{r}c_ia_{n - i} = c_1a_{n - 1} + \dotsi + c_ra_{n - r},\quad (n \geq r),
    \end{equation}
    where $c_1, \dotsc, c_r$ are specified constants.
\end{itemize}

We want to find an explicit formula for $a_n$ in terms of $n$.

The recurrence relation ($2$) is linear because no term involves more than a single factor of the $a_i$,
and it is homogeneous because every term involves an $a_i$.

We seek solutions to the recurrence relation (1) of the form $a_n = x ^ n, x \neq 0$.
\[
x ^ n = \sum_{i = 1}^{r}c_i x ^ {n - i},\quad(n \geq r).
\]
Divide through by $x ^ {n - r}$ (the excess powers of $x$) to get
\begin{equation}
    x ^ r - \sum_{i = 1}^{r}c_i x ^ {r - i} = 0.
\end{equation}

This is the characteristic equation.

The general method is as follows.
\begin{enumerate}[label = \textbf{Step \arabic*}]
    \item Write down the characteristic equation.
    \item Find the roots $\alpha_1, \dotsc, \alpha_r$.
    \item Write down general solution to the recurrence relation.
    If $\alpha_1, \dotsc, \alpha_r$ are distinct then the general solution to the recurrence relation is
    \[
    a_n = g(n) = d_1\alpha_1 ^ n + d_2 \alpha_2 ^ n + \dotsi + d_r \alpha_r ^ n
    \]
    \item Apply the initial conditions to get $r$ linear equations in the $e$ unknown constants $d_i$.
    Solve these to recover the solution $a_n$ to the recurrence relation with initial conditions.
\end{enumerate}

\begin{example}
    Find the general solution to $a_{n} = 3a_{n - 1} + 4a_{n - 2} (n \geq 2)$, $a_0 = 1, a_1 = 0$.

    Firstly,
    find the characteristic equation
    \[
    x ^ n = 3x ^ {n - 1} + 4x ^ {n - 2} \iff x ^ {n - 2}(x ^ 2 - 3x - 4) = 0.
    \]
    Next,
    find the roots to the equation
    \[
    (x - 4)(x + 1) = 0 \implies x = 4, x = -1.
    \]
    Now,
    as these are distinct the general solution is
    \[
    a_n = d_1(4) ^ n + d_2(-1) ^ n.
    \]
    Using our initial conditions to form linear equations we get
    \begin{align*}
        1 &= d_1 + d_2 \\
        0 &= 4d_1 - d_2
    \end{align*}
    and solving gets us $d_1 = \frac{1}{5}$ and $d_2 = \frac{4}{5}$.
    Finally,
    we can see that our final solution is
    \[
    a_n = \frac{1}{5}(4) ^ n + \frac{4}{5}(-1) ^ n.
    \]
\end{example}

Another notable example is
\begin{example}
    $a_n = 5a_{n - 1} - 6a_{n - 2} - 2n$ $(n \geq 2)$ where $a_0 = a_1 = 1$.
\end{example}
This may look like a difficult example at first,
but if we follow the method which we have outlined works we can get the exact expression for $a_n$ even though we have an $n$ term.
\textbf{However, this does not hold in general}.

When we get repeated roots in the characteristic equation,
we need to tweak the process.
If the root is repeated say $k$ times,
then the expression $d_1\alpha ^ n + \dotsi + d_k\alpha_k ^ n$ in the general solution is replaced by $(e_1 + e_2n + \dotsi + e_kn ^ {k - 1})\alpha ^ n$ for constants $e_1, \dotsc, e_k$.

\subsection{Solving inhomogeneous linear recurrence relations}
Now assume we have the following.
\begin{itemize}
    \item Initial conditions $a_0, a_1, \dotsc, a_{r - 1}$ ($r \in \N$)
    \item Recurrence relation
    \[
    a_n = c_1a_{n - 1} + \dotsi + c_ra_{n - r} + f(n)
    \]
    where $c_1, \dotsc, c_r$ are constants and $f(n)$ is an inhomogeneous part depending on $n$.
\end{itemize}

Now we need steps to solve the recurrence relation
\begin{enumerate}[label = \textbf{Step \arabic*}]
    \item First consider the associated homogenous problem,
    \[
    a_n = c_1a_{n - 1} + \dotsi + c_ra_{n - r}
    \]
    as above.
    Find a general solution to the homogeneous problem,
    $a_n = g(n)$.
    
    \textbf{Warning:} Do not attempt to fix any unknown constants
    (the $d_i$'s)
    at this stage.
    \item Find a particular solution,
    $a_n = p(n)$,
    to the full inhomogeneous problem.
    \item The general solution to the inhomogeneous problem is then the sum of these
    \[
    a_n = g(n) + p(n).
    \]
    \item Apply the initial conditions to determine the unknown constants.
\end{enumerate}

Here is a table of all of the particular solutions
\begin{table}[H]
    \centering
    \begin{tabular}{c|c}
         $f(n)$ & form of particular solution $p(n)$ \\
         \hline
         $A$ & $B_0$ (constant) \\
         $An$ & $B_0 + B_1n$ (linear) \\
         $An ^ 2$ & $B_0 + B_1n + B_2n ^ 2$ (quadratic) \\
         $Aq ^ n$ & $B_0q ^ n$ (exponential) \\
         $Anq ^ n$ & $(B_0 + B_1n)q ^ n$ (etc$\dotsc$)
    \end{tabular}
\end{table}

\newpage

\section{Generating functions}
Generating functions provide a method to solve counting problems,
they encode combinatorial information into a continuous analytic form.
\[
(1 + x) ^ n = \sum_{k = 0} ^ n\binom{n}{k}x ^ k
\]
\begin{definition}
    Let $a_0, a_1, a_2, \dotsc$ be a sequence of numbers
    (usually associated with counting problems)
    The
    (ordinary)
    generating function for the sequence $(a_k)$ is the formal sum
    \[
    f(x) = \sum_{k = 0}^{\infty}a_kx ^ k.
    \]
\end{definition}

\begin{example}
    $7$ chocolate bars are distributed among $4$ people.
    Alice gets at most $4$,
    Brian gets at most $3$,
    Claire gets at most $2$,
    and Derek gets at most $1$.

    How many ways of distributing the bars are there?
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        We are counting solutions $(e_1, e_2, e_3, e_4)$ to the equation
        \[
        e_1 + e_2 + e_3 + e_4 = 7,
        \]
        where $e_1, e_2, e_3, e_4$ are integers satisfying $0 \leq e_1 \leq 4$, $0 \leq e_2 \leq 3$, $0 \leq e_3 \leq 2$.
        and $0 \leq e_4 \leq 1$.
        
        We construct an associated generating function.

        Associate to each variable $e_i$ an expression with the sum of $x ^ p$ over $p$ the possible values of $e_i$.

        E.g. To $e_1$ is associated the term $x ^ 0 + x ^ 1 + x ^ 2 + x ^ 3 + x ^ 4$.

        Create the product of the expressions for each $e_i$:
        \[
        f(x) = (x ^ 0 + x ^ 1 + x ^ 2 + x ^ 3 + x ^ 4)(x ^ 0 + x ^ 1 + x ^ 2 + x ^ 3)(x ^ 0 + x ^ 1 + x ^ 2)(x ^ 0 + x ^ 1).
        \]
        Then each terms in $f(x)$ represents a possible product $x ^ {e_1} \cdot x ^ {e_2} \cdot x ^ {e_3} \cdot x ^ {e_4}$.
        
        But if the sum of the variables equals one holds,
        we know that
        \[
        x ^ {e_1} \cdot x ^ {e_2} \cdot x ^ {e_3} \cdot x ^ {e_4} = x ^ {e_1 + e_2 + e_3 + e_4} = x ^ 7.
        \]
        So every solution $(e_1, e_2, e_3, e_4)$ to the sum corresponds uniquely to a way of multiplying out the expressions in the product $f(x)$ to accumulate $x ^ 7$.

        For example,
        the solution $(e_1, e_2, e_3, e_4) = (4, 0, 2, 1)$ corresponds to
        \[
        (x ^ 0 + x ^ 1 + x ^ 2 + x ^ 3 + x ^ 4)(x ^ 0 + x ^ 1 + x ^ 2 + x ^ 3)(x ^ 0 + x ^ 1 + x ^ 2)(x ^ 0 + x ^ 1)
        \]
        where $x ^ 4, x ^ 0, x ^ 2, x ^ 1$ are selected from each group of sums respectively,
        which is one way of getting $x ^ 7$.
        So the number of solutions is the coefficient of $x ^ 7$ in the series expansion of the generating function $f(x)$.

        The answer is $15$.
    \end{proof}
\end{example}

\begin{example}
    How many solutions are there to the equation
    \[
    e_1 + e_2 + \dotsi + e_n = k,
    \]
    where each $e_i \in \{0, 1\}$ and $n$ and $k$ are given positive integers?
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        Now in constructing our generating function each $e_i$ is associated with the expression $(x ^ 0 + x ^ 1) = (1 + x)$
        (from now on we write $x ^ 0$ as $1$).
        The generating function is then the $n$-fold product
        \[
        f(x) = (1 + x)\cdot(1 + x)\dotsi(1 + x) = (1 + x) ^ n.
        \]
        If we expand the generating function as a power series we get
        \[
        (1 + x) ^ n = \sum_{k = 0}^{n}\binom{n}{k}x ^ k,
        \]
        by the binomial theorem.
        Each term $x ^ k$ corresponds to a choice of $x ^ {e_1}$ from the first bracket,
        $x ^ {e_2}$ from the second,
        etc.,
        in which the total power $x$ is $e_1 + \dotsi + e_n = k$,
        i.e.,
        a solution $(e_1, \dotsc, e_n)$ to the equation.

        So the number of solutions is the coefficient of $x ^ k$ in the generating function $(1 + x) ^ n$,
        which is $\binom{n}{k}$.
    \end{proof}
\end{example}

\begin{lemma}\phantom{}\label{disc_lem_71}
    \begin{enumerate}[label = (\alph*)]
        \item For $n \geq 0$ an integer
        \[
        \sum_{k = 0}^{n}x ^ k = \frac{1 - x ^ {n + 1}}{1 - x}
        \]
        is the generating function for the sequence $1, 1, 1, \dotsc, 1, 1, 0, 0, \dotsc$
        (the first $n + 1$ terms are $1$).
        \item The generating function for the sequence $1, 1, 1, \dotsc$ is
        \[
        \sum_{k = 0}^{\infty}x ^ k = \frac{1}{1 - x}.
        \]
        \item The generating function for the sequence $\binom{n + k - 1}{k}$,
        $k \geq 0$ is
        \[
        \sum_{k = 0}^{\infty}\binom{n + k - 1}{k}x ^ k = \frac{1}{(1 - x) ^ n}.
        \]
        \item If $f(x) = \sum_{k = 0}^{\infty}a_kx ^ k$ and $g(x) = \sum_{k = 0}^{\infty}b_kx ^ k$ are the generating function of sequences $(a_k)$ and $(b_k)$ respectively,
        then
        \[
        f(x)g(x) = \sum_{k = 0}^{\infty}c_kx ^ k
        \]
        is the generating function of the sequence $(c_k)$ where $c_k = \sum_{\ell = 0}^{k}a_{\ell}b_{k - \ell}$.
    \end{enumerate}
    \begin{proof}
        \begin{enumerate}[label = (\alph*)]
            \item This is the sum of a geometric series.
            The formula is easy to prove by induction,
            or directly in the form
            \[
            (1 - x)\sum_{k = 0}^{n}x ^ k = \sum_{k = 0}^{n}(x ^ k - x ^ {k + 1}) = 1 - x ^ {n + 1},
            \]
            since the sum 'telescopes'.
            \item The sum to infinity makes analytical sense only for $|x| < 1$,
            in which case we can take $n \rightarrow \infty$ in (a) to get (b).

            Alternatively,
            write $S = 1 + x + x ^ 2 + \dotsi$ and note that $S = 1 + xS$,
            now solve for $S$.

            \item Recall from the extended form of the binomial theorem that
            \[
            (1 - x) ^ {-n} = \sum_{k = 0}^{\infty}\binom{n + k - 1}{k}x ^ k,
            \]
            as claimed.
            For example,
            the case $n = 2$ gives
            \[
            (1 - x) ^ {-2} = \sum_{k = 0}^{\infty}(k + 1)x ^ k = 1 + 2x + 3x ^ 2 + \dotsi,
            \]
            the generating function for the sequence $1, 2, 3, \dotsc$.
            \item This is just collecting terms.
            For example,
            in
            \[
            (1 + 2x + 4x ^ 2 + 8x ^ 3 + \dotsi)(1 + 5x + 7x ^ 2 + 9x ^ 3 + \dotsi)
            \]
            the coefficient of $x ^ 2$ is
            \[
            1 \cdot 7 + 2 \cdot 5 + 4 \cdot 1 = 21.
            \]
        \end{enumerate}
    \end{proof}
\end{lemma}

\subsection{Recurrence relations and generating functions}

The idea for solving the following is to write the the generating function for $(a_n)$ as $f(x) = \sum_{n = 0}^{\infty}a_nx ^ n$.
In this sum,
substitute in for $a_n$ using the recurrence relation for those values of $n$ for which it is valid,
and then tidy up the remaining terms using the initial conditions.
After some manipulations,
obtain an algebraic equation involving $f(x)$ which can be solved to give a closed-form formula for $f(x)$.
\begin{example}
    Solve for $(a_n)$ satisfying the recurrence relation $a_n = a_{n - 1} + 2a_{n - 2}, n \geq 2$,
    with initial conditions $a_0 = 1$ and $a_1 = 1$.
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        In this case,
        the recurrence relation allows us to replace $a_n$ by $a_{n - 1} + 2a_{n - 2}$ for all $n \geq 2$,
        so we can write
        \begin{align*}
            f(x) &= a_0 + a_1x + \sum_{n = 2}^{\infty}a_nx ^ n \\
            &= a_0 + a_1x + \sum_{n = 2}^{\infty}(a_{n - 1} + 2a_{n - 2})x ^ n \\
            &= 1 - x + \sum_{n = 2}^{\infty}a_{n - 1}x ^ n + 2\sum_{n = 2}^{\infty}a_{n - 2}x ^ n. \\
            \intertext{Now we will take out factors so we have $a_{k}x ^ k$ or similar.}
            &= 1 - x + x\sum_{n = 2}^{\infty}a_{n - 1}x ^ {n - 1} + 2x ^ 2\sum_{n = 2}^{\infty}a_{n - 2}x ^ {n - 2}. \\
            \intertext{Now we have done this let's change it so we only see $a_n$.}
            &= 1 - x + x\sum_{n = 1}^{\infty}a_nx ^ {n} + 2x ^ 2\sum_{n = 0}^{\infty}a_nx ^ n. \\
            \intertext{Now you can see that these now resemble what we defined $f(x)$ to be.}
            &= 1 - x + x(f(x) - a_0x ^ 0) + 2x ^ 2(f(x)) \\
            &= 1 - x + x(f(x) - 1) + 2x ^ 2(f(x)) \\
            &= 1 - x + xf(x) - x + 2x ^ 2f(x).
        \end{align*}
        We can now rewrite this to the following:
        \begin{align*}
        f(x) = 1 - x + xf(x) - x + 2x ^ 2f(x) &\iff 2x - 1 = f(x)(2x ^ 2 + x - 1) \\
        &\iff f(x) = \frac{2x ^ 2 + x - 1}{2x - 1} = \frac{1}{1 + x}.
        \end{align*}
        We can now conclude that $f(x) = \frac{1}{1 + x}$
        and this gets us the generating function which correlates to the alternating series,
        $a_n = (-1) ^ {n}$
        which corresponds to
        \[
        a_n = \begin{cases}
            1, & \text{if $n$ is even} \\
            -1, & \text{if $n$ is odd}.
        \end{cases}
        \]
    \end{proof}
\end{example}

\subsection{Partitions}
A partition of a positive integer $n$ is an expression of $n$ as an unordered sum of positive integers,
called the parts of the partition.

Let $p(n)$ denote the number of partitions of $n$.
\begin{example}
    Find $p(5)$.
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        \begin{align*}
            5 &= 5 \\
            &= 4 + 1 \\
            &= 3 + 2 \\
            &= 3 + 1 + 1 \\
            &= 2 + 2 + 1 \\
            &= 2 + 1 + 1 + 1 \\
            &= 1 + 1 + 1 + 1 + 1.
        \end{align*}
        We can see that $p(5) = 7$.
    \end{proof}
\end{example}

\begin{example}
    Find the generating function of the number $a_n$ of partitions of $n$ into distinct positive integers.
    \begin{proof}[Solution]\renewcommand{\qedsymbol}{}
        For such a partition,
        given any positive integer $k$ it is either present $1$ or not $0$.
        We can say $e_k$ is the contribution of the integer $k$ to the partition,
        i.e. $e_1 = 1, e_3 = 3$.
        We can describe the partition by $(e_1, e_2, e_3, \dotsc)$ satisfying
        \[
        e_1 + e_2 + e_3 + \dotsi = n,
        \]
        where $e_k \in \{0, k\}$ for each $k$.
        So for each $e_k$ we can associate the expression $1 + x ^ k$,
        this is because we would contribute part $k$ to the partition for each $e_k$,
        and for the generating function we have
        \[
        (1 + x)(1 + x ^ 2)(1 + x ^ 3) \dotsi = \prod_{k = 1}^{\infty}(1 + x ^ k),
        \]
        which will generate $a_n$ as the coefficient of $x ^ n$ in the resulting infinite product.

        The best thing to do to understand this is look at a specific case,
        e.g. $n = 5$
        \[
        (1 + x)(1 + x ^ 2)(1 + x ^ 3)(1 + x ^ 4)(1 + x ^ 5) \dotsi = 1 + x + x ^ 2 + 2x ^ 3 + 2x ^ 4 + 3x ^ 5 + \dotsi,
        \]
        where we can see that the coefficient of $x ^ 5$ is $3$,
        this is because $5$ can be partitioned into unique parts in the following ways: 
        \begin{align*}
            5 &= 5 \\
            &= 4 + 1 \\
            &= 3 + 2.
        \end{align*}
    \end{proof}
\end{example}

\begin{theorem}
    The number of partitions $p(n)$ of $n$ is the coefficient of $x ^ n$ in the power series expansion of the infinite product
    \[
    \prod_{k = 1}^{\infty}(1 - x ^ k)^{-1} = \infsum[n = 0] x ^ np(n).
    \]
    \begin{proof}
        Using the fact that
        \begin{align*}
            \infsum[k = 0]x ^ np(n) &= \left(\infsum[k = 0]x ^ k\right) \left(\infsum[k = 0]x ^ {2k}\right)\left(\infsum[k = 0]x ^ {3k}\right)\cdot\dotsc \\
            &= \prod_{k = 1}^{\infty}\left(\infsum[n = 0]x ^ {kn}\right) \\
            &= \prod_{k = 1}^{\infty}\frac{1}{1 - x ^ k} \\
            &= \prod_{k = 1}^{\infty}(1 - x ^ k) ^ {-1}.
        \end{align*}
        \[
        \]
    \end{proof}
\end{theorem}

\subsection{Calculus of generating functions}
We can apply calculus to find the generating functions of sequences.

\begin{example}
    Find the generating function to the sequence $a_n = n$,
    e.g.
    $f(x) = x + 2x ^ 2 + 3x ^ 3 + \dotsi$.
    \begin{align*}
        \infsum[n = 0]nx ^ n &= x\infsum[n = 0]nx ^ {n - 1} \\
        &= x\infsum[n = 0]\frac{d}{dx}{x ^ n} \\
        &= x\frac{d}{dx}\left(\infsum[n = 0]x ^ n\right) \\
        &= x\frac{d}{dx}\left(\frac{1}{1 - x}\right) \\
        &= x \cdot \frac{1}{(1 - x) ^ 2} \\
        &= \frac{x}{(1 - x) ^ 2}.
    \end{align*}
\end{example}

\begin{theorem}
    If $a_n$ is a sequence with generating function $f(x) = \infsum[n = 0]a_nx ^ n$,
    then the generating function for the sequence $b_n = na_n$ is $xf'(x)$.
    \begin{proof}
        \[
        \infsum[n = 0]na_nx ^ n = x\infsum[n = 0]a_nnx ^ {n - 1} = x\frac{d}{dx}\left(\infsum[n = 0]a_nx ^ n\right) = xf'(x).
        \]
    \end{proof}
\end{theorem}

\begin{example}
    Find the generating function for the sequence $a_n = n ^ 2$.
    
    If we let $b_n = n$,
    then $a_n = nb_n$,
    so by the previous theorem.
    \[
    f(x) = xf'(x).
    \]
    We already know the generating function for $b_n$ by a previous example,
    $f(x) = \frac{x}{(1 - x) ^ 2}$ therefore $f'(x) = \frac{1}{(1 - x) ^ 2} - \frac{2x}{(1 - x) ^ 3}$.
    Hence our generating function for $a_n$ is
    \[
    xf'(x) = x\frac{d}{dx}\left(\frac{x}{(x - 1)} ^ 2\right) = x\frac{1}{(1 - x) ^ 2} - \frac{2x ^ 2}{(1 - x) ^ 3} = \frac{x(1 + x)}{(1 - x) ^ 3}
    \]
\end{example}

\begin{theorem}
    If $f(x)$ is the generating function of the sequence $a_n$,
    then $\frac{f(x)}{1 - x}$ is the generating function of the sequence $s_n = \sum_{k = 0}^{n}a_k$.
    \begin{proof}
        Let $h$ be the generating function for $s_n$,
        \[
        h(x) = \infsum[n = 0]s_nx ^ n.
        \]
        By \autoref{disc_lem_71} we get that
        \[
        f(x)g(x) = \infsum[k = 0]c_kx ^ k
        \]
        where $c_n = \sum_{k = 0}^{n}a_{k}b_{n - k}$.
        Here $c_k = s_k$ so
        \begin{equation}
            f(x)g(x) = \infsum[k = 0]s_kx ^ k.
        \end{equation}
        But we need our $c_n$ to be
        \[
        \sum_{k = 0}^{n}a_k,
        \]
        this means that $b_n$ must be $1$ for all $n$ thus,
        \[
        g(x) = \infsum[k = 0]b_kx ^ k = \infsum[k = 0]x ^ k = \frac{1}{1 - x}.
        \]
        Applying this to ($1$) we get
        \begin{align*}
            h(x) &= \infsum[k = 0]s_kx ^ k \\
            &= f(x)g(x) \\
            &= \frac{f(x)}{1 - x}.
        \end{align*}
        This means that the sequence $s_n = \sum_{k = 0}^{n}a_k$ is generated by $\frac{f(X)}{1 - x}$.
    \end{proof}
\end{theorem}













\end{document}